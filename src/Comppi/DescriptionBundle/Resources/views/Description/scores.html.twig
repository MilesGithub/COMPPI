{# src/Comppi/ProteinSearchBundle/Resources/views/about.html.twig #}
{% extends '::base.html.twig' %}

{% block title %}ComPPI - Help/Localization and Interaction Scores{% endblock %}

{% block bundlecontent %}
	<h1><ul class="NavMenu"><li><a href="{{ path('ComppiDescriptionBundle_help') }}">Help</a></li><li>Localization and Interaction Scores</li></ul></h1>
      
	<h2>Summary of the ComPPI scoring system</h2>
	
	<p align="justify">The ComPPI scoring system is designed as a subcellular localization-based measure to score the reliablity of the interaction between two proteins.
	In the first part we calculated the <a href="#locscore">Localization Score</a> for all the proteins with at least one major localization.
	The Localization Score is calculated based on the type of the <a href="{{ path('ComppiDescriptionBundle_help') }}/subcell_locs#origin">subcellular localization</a> data
        for all major localizations where the given protein can be found.
	With this method the localization score incorporates a) the quality of the localization (experimental, predicted, or unknown),
	and b) the quantity of the data which is coming from the number of sources, because of the integrated dataset.
	In the second part we use the previously calculated Localization Score of the interactors to <a href="#intscore">score the interaction</a>
         in a compartment dependent manner.</p>
	
	<p align="justify">In summary, the ComPPI <b>Localization Score</b> gives the probability if the <b>protein</b> is present in the certain major localization,
	while the <b>Interaction Score</b> is a measure for the <b>interaction</b> between the interactors based on the Localization Score.</p>
	
	<p align="justify"><b>Note</b> that the Interaction Score is <b>0</b>, if there was no localization information for one, or both of the interactors.</p>
	
	<h2>Detailed description of the ComPPI scoring system</h2>
	<ol>
		<li><a href="#basics">Basics of the ComPPI scoring system</a></li>
		<li><a href="#locscore">Localization Score</a></li>
		<li><a href="#intscore">Interaction Score</a></li>
		<li><a href="#scoreopt">Optimization</a></li>
		<!--<li><a href="#locdist">Distribution of the Localization Score</a></li>-->
		<!--<li><a href="#intdist">Distribution of the Interaction Score</a></li>-->
	</ol>
	<br/>
        
    <br /><a name="basics"></a>
	<h3>1. Basics of the ComPPI scoring system</h3>
	<p align="justify">We assumed that the different localization entries are independent. Thus we have used the following two basic operations:
	<ul>
		<li>AND (⊕) [standard multiplication, a⊕b=a*b]</li>
		<li>OR (Ⓥ) [aⓋb = 1-(1-a)*(1-b)]</li>
	</ul>
	The ComPPI scoring system works with the major localizations of the proteins, described <a href="{{ path('ComppiDescriptionBundle_help') }}/subcell_locs">here</a>.
	The Localization and Interaction Scores are calculated using a PHP script, while the scores are stored in the SQL-based database.</p></p>


	<br /><a name="locscore"></a>
	<h3>2. Localization Score</h3>	
	<p align="justify">Because of the different types of <a href="{{ path('ComppiDescriptionBundle_help') }}/subcell_locs#origin">subcellular localization</a>
	data we use the following propabilities as the parameters of the calculation after the <a href="#scoreopt">optimization</a>: 
		<ul>
			<li>p=0.7 experimentally verified</li>
			<li>p=0.5 unknown interaction type</li>
			<li>p=0.5 predicted evidence</li>
		</ul>
	</p>
	
	<p align="justify">The Localization Score gives the probability of the protein being in a certain compartment.
	The Localization Score is computed for all the proteins with at least one major localization
	for all the 6 compartments by OR-ing together the localization entries (since every entry is added evidence):
	
	<br /><img src="http://www.linkgroup.hu/pic/score_1.png" alt="loc_score" height="118" width="212" />
	</p>
        
	
	<br /><a name="intscore"></a>
	<h3>3. Interaction Score</h3>
	<p align="justify">The ComPPI Interaction Score is calculated using the probability of the two proteins meeting in any compartment.
        Matching elements (localization probabilities of two proteins in the same localization) are AND-ed together (since both proteins must be present for the interaction):

	<br /><img src="http://www.linkgroup.hu/pic/score_2.png" alt="matching_loc" height="51" width="212" /></p>
	
	<p align="justify">Applying OR to all the 6 locations yields <img src="http://www.linkgroup.hu/pic/score_5.png" alt="p_loc" height="30" width="30" /> (because it does not matter in which location do the two proteins connect).

	<br /><img src="http://www.linkgroup.hu/pic/score_3.png" alt="loc_sum" height="123" width="212" /></p>
	
       
	<a name="scoreopt"><h3>4. Optimization</h3></a>
        
        <p align="justify">Localization evidence type can be experimental, unknown or predicted.
        Each of these is described by a parameter called the evidence type weight, and the ratio of these weights to each other has to be determined to achieve a unified scoring system applicable to the diverse data sources.
        We performed therefore data-driven optimization of the localization evidence type weights.
        Considering the ComPPI dataset the only requirement of the optimization was formalized as experimental>unknown≥predicted.
        This requirement is based on the fact that experimental entries are the most reliable, while localization entries coming from unknown origin could be experimental or predicted as well.
        We chose the Human Protein Atlas (HPA) database containing only experimentally verified subcellular localizations in order to build a positive control dataset,
        where the interactros have at least one common localization according to HPA. 
        Our goal was to find a specific ratio of the experimental, unknown and predicted evidence type weight parameters that maximizes the number of high confidence interactions
        in the positive control dataset (HPA) and simultaneously maximizes the number of low confidence interactions in the ComPPI dataset not containing HPA data.
        These ensure that the quality of data marked as high confidence will match the quality of experimentally verified data.
        All combinations of the experimental, unknown and predicted evidence type weights were set up from 0 to 1 with 0.1 increments.
        The kernel density of the interactions were calculated with all these settings, which gave us the ratio of interactions belonging to a given confidence level compared to the distribution of
        all the interactions. Lastly, the 167 possible kernel density solutions were tested (see all possible solutions on the video below) to find the parameter combination that maximizes 
        he number of both the low and high confidence interactions as described above.
        This resulted in 0.7, 0.5, and 0.5 as the relative evidence type weights for experimental, unknown and predicted data types, respectively. </p>
        
        <iframe width="420" height="315" src="//www.youtube.com/embed/kekB0_YU494" frameborder="0" allowfullscreen></iframe>
        
	<!--
	<p></p>
        
	<br /><a name="locdist"></a>
	<h3>4. Distribution of the localization score</h3>
	 
	<p></p>
	 
	<br /><a name="intdist"></a>
	<h3>5. Distribution of the interaction score</h3>
	
	<p></p>
-->

	<p class="backToTOC"><a href="{{ path('ComppiDescriptionBundle_help') }}">&#x21e6; Back to Help Table of Contents</a>
        <br/><a href="{{ path('ComppiDescriptionBundle_about') }}">&#x21e6; Back to Starting Page</a></p>
{% endblock %}
